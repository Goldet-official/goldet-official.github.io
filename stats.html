<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Goldet | Stats</title>
<link rel="stylesheet" href="stats.css">
<link href="https://fonts.googleapis.com/css2?family=Titan+One&display=swap" rel="stylesheet">
</head>
<body>

<div class="sidebar">
  <h2 class="logo">Goldet</h2>
  
  <ul>
    <li>ğŸ† Stats</li>
    <li>ğŸ“Š Leaderboard</li>
    <li>ğŸ’¬ Chat</li>
    <li>ğŸ›¡ï¸ Clans</li>
    <li>ğŸ›’ Market</li>
    <li>ğŸ“¦ Items</li>
    <li>âš™ï¸ Settings</li>
    <li>ğŸ“° News</li>
  </ul>
</div>

<div class="main">

  <!-- Top Profile Card -->
  <div class="profile-card">
    <div class="avatar"></div>
    <div class="profile-info">
      <h2 class="username" id="usernameDisplay">YourName</h2>

      <div class="level-bar">
        <div class="bar-fill" id="xpBar"></div>
      </div>

      <p class="level-text" id="levelDisplay">Level 1</p>
    </div>

    <div class="profile-actions">
      <button class="btn">View Stats</button>
      <button class="btn">Trade</button>
    </div>
  </div>

  <!-- Stats Row -->
  <div class="stats-row">
    <div class="stat-box">
      <p class="stat-title">Tokens</p>
      <p class="stat-value" id="tokensDisplay">0</p>
    </div>

    <div class="stat-box">
      <p class="stat-title">Blocks Unlocked</p>
      <p class="stat-value" id="blocksDisplay">0 / 0</p>
    </div>

    <div class="stat-box">
      <p class="stat-title">Packs Opened</p>
      <p class="stat-value" id="packsDisplay">0</p>
    </div>

    <div class="stat-box">
      <p class="stat-title">Messages Sent</p>
      <p class="stat-value" id="messagesDisplay">0</p>
    </div>
  </div>

  <!-- Friends -->
  <h2 class="section-title">Friends</h2>
  <div class="friends-grid">
    <div class="friend-card"></div>
    <div class="friend-card"></div>
    <div class="friend-card"></div>
    <div class="friend-card"></div>
    <div class="friend-card"></div>
    <div class="friend-card"></div>
    <div class="friend-card"></div>
    <div class="friend-card"></div>
  </div>

  <!-- Requests -->
  <h2 class="section-title">Requests</h2>
  <div class="requests-grid">
    <div class="request-card"></div>
    <div class="request-card"></div>
    <div class="request-card"></div>
  </div>

</div>

<!-- ğŸ”¥ GOLDEN FIREBASE USER LOADER -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDe9lhPW1DEli3moVwtywCE0ucXKoZSoXs",
    authDomain: "goldet-504aa.firebaseapp.com",
    databaseURL: "https://goldet-504aa-default-rtdb.firebaseio.com",
    projectId: "goldet-504aa",
    storageBucket: "goldet-504aa.firebasestorage.app",
    messagingSenderId: "36312610816",
    appId: "1:36312610816:web:ded0576d78ebf1ceba00e5",
    measurementId: "G-TTJNTC824V"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const db = getDatabase();

  onAuthStateChanged(auth, (user) => {
    if (!user) {
      document.getElementById("usernameDisplay").textContent = "Not Logged In";
      return;
    }

    const uid = user.uid;
    const userRef = ref(db, "users/" + uid);

    onValue(userRef, (snap) => {
      const data = snap.val();
      if (!data) return;

      // Replace â€œYourNameâ€
      document.getElementById("usernameDisplay").textContent = data.username ?? "Unknown";

      // Level
      document.getElementById("levelDisplay").textContent = "Level " + (data.level ?? 1);

      // XP bar (0â€“100%)
      document.getElementById("xpBar").style.width = (data.xp ?? 0) + "%";

      // Tokens
      document.getElementById("tokensDisplay").textContent = data.tokens ?? 0;

      // Blocks
      document.getElementById("blocksDisplay").textContent =
        (data.blocksUnlocked ?? 0) + " / " + (data.totalBlocks ?? 0);

      // Packs opened
      document.getElementById("packsDisplay").textContent = data.packsOpened ?? 0;

      // Messages sent
      document.getElementById("messagesDisplay").textContent = data.messages ?? 0;
    });
  });
</script>

</body>
</html>
